# 프로젝트 상태 (Status)

## 현재 진행 상황
- [x] 프로젝트 초기화 (Vite + React 19 + TS)
- [x] UI/UX 고도화 (Ant Design 6 + Tailwind CSS 4)
  - [x] 상단 헤더 및 전문적인 레이아웃 구성
  - [x] 반응형 캔버스 및 Empty State 디자인
  - [x] **아이콘 시스템 교체** (MDI 적용 완료)
  - [x] **Tailwind CSS 4 설정 최적화** (`@import` 문법 적용)
- [x] Fabric.js 기반 MemeEditor 핵심 기능 구현
  - [x] 이미지 로드/업로드, 텍스트 추가/편집
  - [x] 이미지 다운로드
- [x] **UI 구조 리팩토링 (완료)**
  - [x] 탭 기반 → **툴바(Toolbar) 기반** 에디터로 변경
  - [x] 텍스트, 도형, 브러쉬를 동등한 '도구'로 격상
  - [x] **고급 편집 도구 구현 (완료)**
    - [x] **도형도구**: 사각형/원형 추가, 자유 변형, 다중 선택 지원
    - [x] **브러쉬 도구**: 자유 드로잉 기능 및 색상/두께 조절
        - [x] **스포이드 도구**: 브라우저 기본 EyeDropper API 연동을 통한 색상 추출
    - [x] **모바일 최적화 및 반응형 UI 구현 (완료)**
      - [x] **레이아웃**: 모바일용 세로 스택 레이아웃 적용 및 캔버스 크기 자동 조절
      - [x] **네비게이션**: 모바일 헤더에 햄버거 메뉴(Drawer) 적용 및 버전 정보 숨김
        - [x] **PC/Mobile 분기 처리 수정**: 데스크탑에서 햄버거 메뉴 숨김 처리 강화
        - [x] **Drawer UI 개선**: 메뉴 아이템 정렬 및 스타일링(간격, 폰트) 개선
      - [x] **툴바/패널**: 하단 고정 탭 바 및 **일체형 폴딩(Folding) 방식**의 속성 패널 UI 구현
        - [x] 툴바 바로 위에서 확장되는 어코디언 방식 레이아웃 (최종 검증 완료)
        - [x] 캔버스(바깥 영역) 터치 시 자동 폴딩 기능 (최종 검증 완료)
        - [x] 페이지 진입 시 기본 탭 미선택 및 패널 닫힘 상태 유지 (최종 검증 완료)
    - [x] **공유 및 내보내기 기능 개선 (완료)**
      - [x] **'공유' 도구 탭 신설**: 이미지 다운로드 버튼을 전용 탭으로 이동하여 UI 단순화
      - [x] **다양한 포맷 지원**: PNG, JPG, WEBP, PDF 내보내기 지원 (`jspdf` 도입)
      - [x] **클립보드 복사**: 생성된 이미지를 클립보드로 바로 복사하는 기능 추가
      - [x] **헤더 정리**: PC/모바일 모든 뷰에서 버전 정보(v1.0.0) 제거로 깔끔한 상단바 유지
      - [x] **UI 단순화**: '내보내기' 섹션의 불필요한 설명 텍스트 제거 및 즉각적인 기능 접근 제공
      - [x] **사용성 개선 (Fix)**: 캔버스 터치 시 패널 닫힘 방지 + 패널 외부 영역 터치 시 닫힘 기능 복원
      - [x] **도구 비활성화 처리**: 이미지 업로드 전 다른 편집 도구(텍스트, 도형, 브러쉬, 공유) 비활성화
- [x] **코드 품질 개선 및 안정화 (2026-02-09)**
  - [x] **Strict Type Checking**: `FabricObject` 확장(`id`, `name`) 및 `enforceBoundaries` 타입 이슈 해결
  - [x] **Lint Pass**: 미사용 prop(`_hasBackground`) 및 변수 정리, ESLint 9 규격 준수
  - [x] **의존성 최적화**: `tsconfig.node.json` 오류 해결을 위한 `@types/node` 설치
- [x] **편집 기능 고도화 (New)**
  - [x] **Undo/Redo (실행 취소/다시 실행)**:
    - [x] History 스택 관리 로직 구현 (Canvas `toJSON`)
    - [x] 단축키 지원 (`Ctrl+Z`, `Ctrl+Y` / `Shift+Z`)
    - [x] 캔버스 상단 플로팅 컨트롤 UI 추가
  - [x] **레이어 관리 (Layer Management)**:
    - [x] **레이어 순서 변경**: 맨 앞으로/맨 뒤로, 한 단계 앞/뒤 이동 구현 (`bringObjectToFront` 등)
    - [x] **UI 시각화**: 캔버스 객체 목록을 패널에 표시 및 버튼 클릭으로 순서 제어
    - [x] **명칭 변경**: '배경(Background)' → '**이미지(Image)**'로 용어 통일
- [x] **모바일 사용성 개선 (Mobile UX)**:
  - [x] **터치 인터랙션 최적화**: 캔버스 영역 `touch-action: none` 적용으로 스크롤 간섭 제거
  - [x] **객체 조작성 향상**: Fabric.js 객체 핸들(Corner) 크기 확대 및 패딩 적용
  - [x] **UI 방해 요소 제거**: 모바일에서 객체 선택 시 속성 패널 자동 열림 방지
- [x] **AI 실행 환경 가이드 작성 (AGENTS.md)**
     
     - [x] **UI/UX 세부 정교화 (완료)**
  - [x] **도구 버튼 디자인 개선**: `MemeToolbar`의 이미지/도형 등 도구 버튼이 활성화되었을 때의 디자인을 기존의 투박한 파란색 블록에서 현대적이고 깔끔한 스타일(흰색 배경 + 파란색 인디케이터)로 개선
  - [x] **일관성 확보**: 'Base' 모드와 'Meme' 모드 전환 탭의 활성화 스타일을 통일하여 시각적 혼동 제거
  - [x] **불필요한 요소 제거**: 라벨과 중복되는 툴팁 제거 및 사용되지 않는 `Tooltip` 컴포넌트 임포트 정리
  - [x] **레이아웃 최적화**: 버튼의 고정 비율(`aspect-square`)을 제거하고 여백 기반으로 조정하여 보다 균형 잡힌 외형 구현

- [x] **MemeToolbar 및 UI 디자인 통합 (최종 완료)**
  - [x] **8px 그리드 시스템 엄격 적용 (Fix)**: Tailwind 홀수 단위(3, 1.5 등)를 짝수 단위(2, 4 등)로 전면 교체하여 일관성 확보.
  - [x] **디자인 시스템 통합**: 좌측 도구 버튼의 디자인을 상단 모드 스위처(Base/Meme)와 동일한 스타일로 통일하여 일관성 확보.
  - [x] **UI 단순화**: 시각적 노이즈를 유발하는 포인트 인디케이터(바 형태)를 제거하고 버튼의 면과 선의 변화로 상태 표시.
  - [x] **일관성 강화**: Radius(xl), Padding, Gap을 전반적으로 통일하여 앱의 완성도 향상.

  - [x] **8px 그리드 시스템 적용**: 모든 여백(Padding), 간격(Gap), 크기를 8px 배수로 재조정하여 시각적 안정성 확보
  - [x] **버튼 스케일 최적화**: 도구 버튼을 `aspect-square` 및 `w-full`로 확장하여 상단 모드 스위처와 크기 균형을 맞춤
  - [x] **시각적 계층 구조 강화**: 아이콘 크기를 확대(1.2)하고 활성 상태에서 `bg-blue-50`, `ring-1`, `shadow`를 조합하여 현대적인 에디터 룩 완성
  - [x] **반응형 최적화**: 모바일 탭 바에 최적화된 원형 인디케이터 도트 적용 및 터치 영역 확대

- [x] **도형 속성 단순화 및 리팩토링 (완료)**
  - [x] **도형 속성 최적화**: 가리기 용도에 불필요한 도형의 불투명도 및 외곽선 두께 조절 기능 제거
  - [x] **컬러피커 컴포넌트 분리**: `MemeColorPicker`를 별도 파일로 분리하여 코드 재사용성 및 가독성 향상 (Issue #6)
  - [x] **UI/UX 버그 수정 및 레이어 UI 분리 (완료)**
    - [x] **불투명도 버그**: 텍스트 불투명도 조절 시 UI가 즉각 반영되지 않던 문제 수정 (State 동기화)
    - [x] **모드별 제약 강화**: Base 모드에서 텍스트 레이어가 선택되던 문제 해결 (잠금 처리)
    - [x] **레이어 UI 독립화**: 레이어 관리 기능을 속성 패널 하단에 고정 섹션으로 완전히 분리하여 상시(토글형) 노출되도록 개선
    - [x] **Toolbar 개선**: 레이어 버튼을 기본 도구 섹션 바로 아래로 분리하고 디자인 일관성 유지
    - [x] **Layout 통일감**: 헤더, 툴바, 속성 패널의 여백(`px-8`)을 통일하여 시각적 정렬 완성
    - [x] **레이어 섹션 고도화**: 레이어 관리 영역을 속성 패널 하단에 완전히 독립된 고정 섹션으로 분리 및 디자인 개선
    - [x] **Lint Pass**: 미사용 변수 정리 및 ESLint 규칙 준수 확인 (Issue #7)
- [x] **Build Fix**: `vite.config.ts`의 잘못된 플러그인 임포트 수정 (`react-swc` -> `react`)
- [x] **Runtime Fix**: `verbatimModuleSyntax` 설정에 따른 `import type` 명시 (ToolType 관련 오류 수정)
- [x] **TypeScript 최적화**: `tsconfig.json` 설정을 현대적인 Vite 환경(`Bundler` 해설 등)에 맞게 고도화 및 `import type` 규격 준수 (Issue #8)
- [x] **레이아웃 밀도 최적화 (완료)**:
  - [x] 과도하게 넓은 여백(Margin/Padding) 전방위 축소 (`p-12` -> `p-8`, `px-8` -> `px-6`)
  - [x] 에디터 사이드바 너비 최적화 (`448px` -> `400px`) 및 캔버스 영역 확대
  - [x] 8px 그리드 시스템 기반의 짜임새 있는 UI 리듬 구현

- [x] **모바일 UI/UX 고도화 및 반응형 레이아웃 최적화 (완료)**
  - [x] 하단 툴바 스크롤 및 아이템 간격 최적화
  - [x] 모드 전환(Base/Meme) 스위처 크기 조정
  - [x] 모바일 Empty State UI 높이 최적화
  - [x] 속성 패널 정보 밀도 개선

- [x] **모바일 모드 스위처 위치 변경 (완료)**
  - [x] `MemeModeSwitcher` 컴포넌트 분리
  - [x] 모바일 상단(헤더 하단) 배치
  - [x] 데스크탑 사이드바 통합

- [x] **모바일 레이어 순서 변경 버튼 동작 개선 (완료)**
  - [x] 레이어 제어 버튼 `Tooltip` 제거
  - [x] 버튼 이벤트 전파 차단 로직 강화

- [x] **모바일 도형 터치 선택 문제 해결 (완료)**
  - [x] 빈 공간 클릭 시에만 패널 닫히도록 로직 수정 (`opt.target` 체크)
  - [x] 모바일에서도 객체 선택 시 속성 패널 자동 열림 허용
  - [x] 신규 객체 추가 시 현재 모드에 따른 `selectable` 속성 명시적 부여

- [x] **캔버스 터치 시 이벤트 전파로 인한 선택 해제 문제 해결 (완료)**
  - [x] 캔버스 래퍼 `div`에 `stopPropagation` 추가하여 상위 `onClick` 간섭 방지

- [x] **모바일 하단 UI의 클릭 차단 문제 해결 (완료)**
  - [x] 하단 UI 컨테이너에 `pointer-events-none` 적용하여 캔버스 하단 터치 활성화
  - [x] 패널 및 툴바 요소에 `pointer-events-auto` 적용

- [x] **캔버스 외부 클릭 시 선택 해제 기능 추가 (완료)**
  - [x] 배경(여백) 클릭 시 `discardActiveObject()` 호출로 선택 해제 및 UI 동기화

- [x] **모바일 슬림 프로퍼티 바 도입 (완료)**
  - [x] 객체 선택 시 패널 높이 축소 (45vh -> 120px)
  - [x] 가로 스크롤형 속성 편집 UI 구현
  - [x] 도구별 모바일 레이아웃 최적화

- [x] **Ant Design Drawer 속성 수정 (완료)**
  - [x] `width` 속성 제거 및 `styles={{ wrapper: { width: 280 } }}`로 대체하여 콘솔 경고 해결

- [x] **도구 체계 전면 개편 (완료)**
  - [x] Base/Meme 모드 통합 및 `editMode` 제거
  - [x] [이미지, 텍스트, 지우개, 레이어, 공유] 5대 도구 체계 수립
  - [x] 도형/브러쉬 기능을 '지우개' 도구로 통합

- [x] **텍스트 도구 UI 간소화 (완료)**
  - [x] 텍스트 속성 패널을 `[입력] [색상] [외곽선]` 단일 행으로 변경
  - [x] 슬라이더 등 복잡한 제어 UI 제거

- [x] **텍스트 레이어 목록형 편집기 구현 (완료)**
  - [x] 텍스트 도구 패널에서 모든 텍스트 객체를 리스트로 표시
  - [x] 개별 항목별 인라인 편집 UI 제공
  - [x] 레이어 선택 시 개별 속성창 노출 로직 제거

- [x] **통합 편집 패널 및 레이어 관리 UI 정교화 (2026-02-09 완료)**
  - [x] **레이어 순서 조절 간소화**: 세로형 위/아래 버튼으로 레이어 조절 UI 직관성 개선
  - [x] **컬러피커 디자인 폴리싱**: 테두리 없는 스타일로 레이어 아이템에 자연스럽게 통합
  - [x] **텍스트 동기화 개선**: 레이어 리스트의 입력란 수정 시 캔버스와 실시간 동기화 (`setLayers`)
  - [x] **도구 활성화 조건 완화**: 배경 이미지 없이도 모든 도구(편집, 공유) 사용 가능하도록 변경

- [x] **캔버스 확장 및 경계 제한 시스템 구현 (2026-02-09 완료)**
  - [x] **Safe Area 도입**: 60px 여백(`CANVAS_MARGIN`)을 추가하여 선택 박스가 잘리는 문제 해결
  - [x] **이동 제한 로직**: 객체가 작업 영역(이미지 영역)을 벗어나지 못하도록 물리적 경계 제한 (`object:moving`)
  - [x] **배경 처리 방식 개선**: `backgroundImage` 대신 레이어 시스템에 통합된 배경 객체로 관리
  - [x] **내보내기 자동 크롭**: 다운로드 시 여백을 제외한 실제 작업 영역만 정확히 추출

  - [x] **모바일 UI 일원화 및 사용성 최적화 (2026-02-09 완료)**
  - [x] **슬림 바 제거**: PC와 동일한 전체 패널(45vh) 사용으로 기능 복잡성 해소
  - [x] **도구 전환 접근성 개선**: 객체 선택 상태에서도 다른 도구 패널로 자유롭게 전환 가능

- [x] **기능 안정화 및 버그 수정 (Fix)**
  - [x] **도구 비활성화 로직 구현**: 이미지가 없을 때 '편집', '공유' 탭을 비활성화하여 UX 시나리오 강제 (Issue #23)
  - [x] **도형 도구 UI 개선**: '도형' 버튼을 드롭다운으로 변경하여 [사각형/원형] 선택 기능 추가 (Issue #24)
  - [x] **Undo/Redo 동기화**: 히스토리 복원 시 레이어 리스트 상태(`layers`)가 즉시 동기화되도록 수정 (Issue #25)

## 다음 작업
- [ ] 성능 최적화: 레이어 수가 많아질 때의 렌더링 성능 검토- [ ] 접근성 가이드라인 준수 확인