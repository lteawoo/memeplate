# Memeplate 개발 TODO

## 최근 완료 (2026-02-26)
- [x] `ThumbnailCard` 블러 배경 레이어 제거 유지 + 원본 비율 보존(`h-auto w-auto max-w/max-h`) 렌더 정렬
- [x] 썸네일 로딩 스켈레톤 `z-20` 보정
- [x] 검증(`memeplate-web lint/build`, 데스크톱/모바일 스크린샷)

## 최근 완료 (2026-02-25)
- [x] 리믹스 상세 `원본 밈플릿` 표기를 `밈플릿`으로 통일
- [x] 템플릿 상세 정보의 `공개 상태` 표시 행 제거
- [x] 리믹스 상세 생성일을 `생성일` 기준으로 정리하고 API `createdDate` 필드 추가/연동
- [x] 전범위 검증(`memeplate-api build`, `memeplate-web lint/build`)

## 자체 엔진 기능 고도화 [Completed]
- [x] **컨트롤 인터랙션**
  - [x] 8방향 리사이즈 핸들
  - [x] 회전 핸들 (MTR)
  - [x] 마우스 커서 피드백 (move, resize, crosshair)
  - [x] 캔버스 hover/터치 시 배경 제외 전체 레이어 얇은 외곽선 표시
  - [x] 캔버스 hover/터치 레이어 외곽선을 점선 스타일로 적용
  - [x] 선택 레이어 존재 시 hover 얇은 외곽선 숨김 + 선택 조절 외곽선 점선 통일
  - [x] 선택 외곽선 두께 소폭 상향 + hover/선택 점선 패턴 길이 소폭 확대
  - [x] 캔버스 이탈/외부 터치 시 레이어 외곽선 숨김 상태 동기화
  - [x] 리사이즈 UX 표준화 (코너 자유변형, 엣지 단일 축)
  - [x] 단축키 modifier(`Shift`, `Alt/Option`) 동작은 스펙 제외
  - [x] 회전 핸들(MTR) 히트 테스트 좌표 보정
  - [x] 툴바 컴팩트화 1차 (`이미지/편집/공유` 높이/패딩/여백 축소)
  - [x] 레이어 텍스트 편집 2단 레이아웃 적용(입력칸 가로폭 확장)
- [x] **텍스트 레이어 정립**
  - [x] 자동 줄바꿈 (Word Wrap)
  - [x] 고정 틀(Fixed Container) 방식: 내용 변경 시 크기 유지
  - [x] 리사이즈 시 fontSize 보존 (Scale 대신 Width/Height 조절)
  - [x] 세로 정렬: 상단(Top) 고정
  - [x] glyph metric(ascent/descent) + stroke/inset 반영으로 텍스트 상/하단 클리핑 완화
  - [x] 최소 폰트(8px) 미적합 시 1px까지 autoshrink fallback으로 줄바꿈 이후 높이 clipping 방지
  - [x] 편집 오버레이 textarea box-model 보정(border->outline, 상하 안전 여백)으로 편집 상태 clipping 완화
- [x] **렌더링 시스템 최적화**
  - [x] Dirty Flag (`needsRedraw`) 기반 렌더링 루프
  - [x] 비동기 이미지 로딩 대응 (로딩 중 자동 재렌더링)
  - [x] 캔버스 마진 제거 및 좌표계 최적화
  - [x] 이벤트 중복 실행 방지 및 리소스 정리(Cleanup) 로직 구현

## 향후 과제
- [x] **텍스트 더블 클릭 편집 (#29)**
  - [x] `Canvas.ts`: `dblclick` 브라우저 이벤트 리스너 추가 및 커스텀 이벤트 발생
  - [x] `useMemeEditor.ts`: `editingTextId` 상태 및 더블 클릭 핸들러 추가
  - [x] `MemeCanvas.tsx`: 캔버스 상단에 동적 textarea 오버레이 구현
  - [x] 텍스트 스타일(폰트 크기, 정렬 등) 동기화 로직 정교화
- [x] **텍스트 더블클릭 편집 UX 보강**
  - [x] `MemeCanvas.tsx`: 편집 textarea 대비(배경/그림자/보더/캐럿) 강화
  - [x] `MemeCanvas.tsx`: 편집 폰트 크기를 텍스트 박스 fit 결과와 동기화
  - [x] `MemeCanvas.tsx`: `Ctrl/Cmd + Enter` 저장, `Esc` 취소/원복 추가
  - [x] `MemePropertyPanel.tsx`: 레이어 텍스트 입력을 `Input.TextArea`로 변경(최대 3줄)
  - [x] `MemeCanvas.tsx`: 캔버스 중앙정렬 레이아웃에서 편집 textarea 위치 계산에 캔버스 오프셋 보정
- [x] **텍스트 레이아웃 공통화 (WYSIWYG 개선)**
  - [x] `core/canvas/textLayout.ts` 공통 레이아웃 유틸 추가
  - [x] `Textbox.ts` 렌더에서 공통 레이아웃 계산 재사용
  - [x] `MemeCanvas.tsx` 편집 오버레이 폰트/세로 정렬 계산에서 공통 로직 재사용
  - [x] 긴 단어/무공백 문자열 문자 단위 줄바꿈 fallback 추가(특정 크기에서 텍스트 소실 체감 보정)
  - [x] 최대 폰트 크기 탐색을 실제 fit 지점까지 보정(100회 제한 제거)
- [x] **텍스트 레이어 기본값/placeholder 정리**
  - [x] `useMemeEditor.ts`: 새 텍스트 레이어 기본 문자열 제거(빈 텍스트 생성)
  - [x] `MemePropertyPanel.tsx`: 텍스트 레이어 입력 placeholder를 `텍스트-{순번}`으로 표시
- [x] **캔버스 표시/줌 UX 개선 (#30)**
  - [x] `useMemeEditor.ts`: 업로드 시 캔버스 논리 크기를 원본 해상도 기준으로 설정
  - [x] `MemeCanvas.tsx`: `Fit`/`100%` 토글 및 줌 퍼센트 표시 추가
  - [x] `MemeCanvas.tsx`: `Ctrl/Cmd + 0` 단축키로 `Fit` 복귀 지원
  - [x] `MemeEditor.tsx`: `workspaceSize` 전달로 표시 스케일 연동
- [x] **린트 경고 정리 (#33)**
  - [x] `useMemeEditor.ts`: Undo/Redo 키보드 effect 의존성 경고 제거
  - [x] `useMemeEditor.ts`: 이벤트/업로드 파라미터의 `any` 타입 제거
  - [x] `useMemeEditor.ts`: 미사용 에러 변수 정리 및 타입 캐스팅 정리
- [x] **텍스트 렌더 품질 개선 (#37)**
  - [x] `Canvas.ts`: render scale/backing store 동기화 로직 추가
  - [x] `MemeCanvas.tsx`: 표시 배율 연동 `setRenderScale` 적용
  - [x] `MemeCanvas.tsx`: 편집 textarea의 폰트/정렬/스타일 동기화
- [x] **줌 UX 고도화 (#39)**
  - [x] `MemeEditor.tsx`: `fit/manual` 줌 상태 및 `- / + / 퍼센트 입력` 컨트롤 추가
  - [x] `MemeCanvas.tsx`: 수동 줌 퍼센트 기반 표시 스케일 계산 추가
  - [x] `MemeCanvas.tsx`: `Ctrl/Cmd + Wheel` 연속 줌 이벤트 연결
  - [x] `MemeCanvas.tsx`: Auto Fit 스케일 상한(100%) 적용으로 과확대 방지
  - [x] `MemeCanvas.tsx`: 화면/원본 비율에 따른 Auto Fit 가변 상한(1.1/1.25/1.4) 적용
  - [x] `MemeEditor.tsx`: 줌 UI 요소 제거(버튼/입력)
  - [x] `MemeCanvas.tsx`: Auto Fit 단일 스케일 계산으로 단순화
  - [x] `MemeEditor.tsx`: `Fit`/`100%` 컨트롤 및 퍼센트 표시 복원
  - [x] `MemeCanvas.tsx`: `fit/actual` 표시 모드 재연결 및 기본 `fit` 복구
  - [x] `MemeEditor.tsx`: 줌 퍼센트 표시 제거
  - [x] `MemeCanvas.tsx`: Auto Fit 가변 상한 제거 및 순수 Fit 비율 복원
  - [x] `MemeEditor.tsx`: `workspaceSize` 변경 시 `zoomMode`를 `fit`으로 자동 복귀
  - [x] `EditorLayout.tsx`/`MemeEditor.tsx`/`MemeCanvas.tsx`: `min-w-0` 추가로 대형 캔버스가 레이아웃 폭을 밀어내는 문제 수정
  - [x] `MemeCanvas.tsx`: `fit` 모드 표시 크기를 floor 계산으로 변경해 비클리핑 보장 강화
  - [x] `useMemeEditor.ts`: 줌 상태(`25%~400%`) 및 `Ctrl/Cmd + +|-|0` 단축키 재도입
  - [x] `MemeCanvas.tsx`: `fitScale * zoom` 정책 유지 + `Canvas` viewport zoom/pan 연동
  - [x] `MemeEditor.tsx`: 우측 패널에 `-`, 퍼센트, `+`, `맞춤` 줌 컨트롤 재추가(모바일/데스크탑 공통)
  - [x] `Canvas.ts`: 렌더/포인터/컨트롤 좌표계를 viewport 기준으로 확장(풀캔버스 줌)
  - [x] `MemeCanvas.tsx`: 일반 휠 스크롤(`Ctrl/Cmd` 미입력) 팬 지원 및 textarea 오버레이 좌표를 viewport 변환과 동기화
  - [x] `Canvas.ts`: scene(workspace)와 view(screen) 크기를 분리해 full viewport 캔버스 지원
  - [x] `MemeCanvas.tsx`: canvas 표시 크기를 fit px에서 `w-full h-full`로 전환
  - [x] `MemeCanvas.tsx`: `Ctrl/Cmd + Wheel` 줌을 커서 앵커 기준으로 보정(줌 중심점 고정)
  - [x] `MemeCanvas.tsx`/`MemeEditor.tsx`: 캔버스 스테이지 데스크탑 패딩/라운드 제거 + 좌측 영역 무여백 full-fill 정렬
  - [x] `index.css`: 캔버스 스테이지를 에디터 톤(그리드)으로 정렬하고 캔버스 라운드/그림자 제거
  - [x] `MemeCanvas.tsx`: `fitScale`에 headroom 비율(`0.94`)을 적용해 기본 맞춤 상태 과밀(꽉 참) 완화
  - [x] `MemeCanvas.tsx`: 업로드 후 캔버스 흰 바탕 노출 제거(`bg-card -> bg-transparent`)
  - [x] `Canvas.ts`: 에디터 배경(그리드/워크스페이스 프레임) 렌더를 캔버스 내부로 이관
  - [x] `MemeCanvas.tsx`: `스페이스 + 좌클릭 드래그`, `중클릭 드래그` 팬 인터랙션 추가
  - [x] `index.css`: 팬 모드 커서(`grab/grabbing`)를 캔버스 상태 클래스와 연동
  - [x] `Canvas.ts`: viewport pan bounds에 overscroll 여유 추가(100% 상태에서도 이동 가능)
  - [x] `Canvas.ts`: fit 상태에서 `centerViewport` 자동 중앙 정렬 지원
  - [x] `MemeCanvas.tsx`: 일반 휠 팬을 확대 상태 제한 없이 항상 허용
  - [x] `Canvas.ts`: 테마 속성 변경 감지(`data-theme/style/class`) 시 캔버스 즉시 재렌더
  - [x] `useMemeEditor.ts`: `object:moving` 경계 제한 제거로 오브젝트 자유 이동 허용
  - [x] `Canvas.ts`: 에디터 그리드를 viewport 결합 좌표계에서 screen 고정 좌표계로 분리
  - [x] `MemeCanvas.tsx`: `Space + 좌클릭 드래그`, `중클릭 드래그` 팬 인터랙션 복구
  - [x] `index.css`: 팬 준비/드래그 상태 커서(`grab/grabbing`) 스타일 정합화
  - [x] `Canvas.ts`: 작업 그리드를 world 좌표계로 재전환(줌/팬 시 워크스페이스와 동기 이동)
  - [x] `Canvas.ts`: 업로드 이미지 작업영역 점선 외곽선(workspace frame) 렌더 제거
  - [x] `useMemeEditor.ts`: 텍스트/도형 레이어 이동/수정 시 workspace 내부 클램프 적용(회전 AABB 반영)
- [x] **줌 정책 단순화 (Fit/100% 제거 + 최대 px 자동 스케일)**
  - [x] `MemeEditor.tsx`: `zoomMode` 상태 및 `Fit`/`100%` 버튼 제거
  - [x] `MemeCanvas.tsx`: 단일 `displayScale` 계산으로 통합
  - [x] `MemeCanvas.tsx`: 최대 표시 변 길이 `800px` 상한 적용
- [x] **고정 크기 조절점 (#27)**
  - [x] `Canvas.ts`: 화면 배율 역보정 로직 (`getSceneScale`) 도입
  - [x] `Canvas.ts`: `drawControls` 핸들 크기 및 선 두께 보정
  - [x] `Canvas.ts`: `findControl` 터치 영역 배율 대응
- [x] **모바일 레이아웃 개편 (#25)**
  - [x] `MemeEditor.tsx`: 모바일 전용 오버레이(`fixed`) 제거 및 세로 배치 로직 구현
  - [x] `EditorLayout.tsx`: 모바일에서의 `flex-col` 및 `overflow` 속성 조정
  - [x] `MemeCanvas.tsx`: 모바일 스크롤 환경에 맞는 높이 최적화
  - [x] `useMemeEditor.ts`: 패널 상태(`isPanelOpen`) 관련 불필요한 로직 제거
- [x] **텍스트 외곽선 강도 기반 UI/렌더 전환**
  - [x] `MemePropertyPanel.tsx`: 외곽선 입력/슬라이더 단위를 `px`에서 `강도`로 변경 (`0~10`)
  - [x] `Textbox.ts`: `strokeWidth`를 폰트 크기 비례 실제 선 두께(px)로 변환해 렌더링
- [ ] **에디터 기능 확장**
  - [x] 텍스트 영역 클리핑 (틀 밖으로 나가는 글자 숨김)
  - [ ] 다중 선택(Multi-selection) 지원
  - [ ] 그룹화(Grouping) 기능
- [ ] **시스템 고도화**
  - [x] API 보안 하드닝 1차 (`helmet`, `rate-limit`, 이미지 프록시 제거)
  - [x] 프론트 상태관리 1차 (`zustand` auth store, React Query 목록 캐시)
  - [x] 공개 목록 API 작성자명 조회 1쿼리화 (`templates`, `meme_images`)
  - [x] 조회수 증가 API 원자 업데이트 적용 (DB 함수 + RPC 전환)
  - [x] 공유 탭 UI 정합화 (`리믹스 게시` 카드 디자인 통일 + 사이드패널 스크롤 보강)
  - [x] Undo/Redo 히스토리 저장 디바운스 1차 (`updateProperty` 200ms coalescing)
  - [x] 템플릿 배경 DataURL -> R2 URL 저장 전환 1차 (`backgroundDataUrl` 업로드/치환)
  - [x] 밈플릿/리믹스 게시 포맷 `webp` 정렬 + 다운로드 기본 포맷 `png` 유지
  - [x] 리믹스 게시 해상도 보정 (`multiplier: 2` 적용)
  - [x] 공유 탭 게시 액션 모달화 (`밈플릿 게시`, `리믹스 게시`)
  - [x] 템플릿 업데이트 시 배경 무변경이면 R2 재업로드 스킵 (재인코딩 방지)
  - [x] 대형 원본 업로드 시 작업영역 자동 축소(`max edge 8192`)로 클리핑 방지
  - [x] 업로드/내보내기 해상도 정책 단순화(`max 800x800` 바운딩 + 다운로드/클립보드/리믹스 `multiplier: 1`)
  - [x] 이미지 업로드 시 성공/실패 토스트 제거(업로드 흐름 노출 최소화)
  - [x] 캔버스 리사이즈 재계산 파이프라인 보정(usable area + border 반영)
  - [x] 모바일 무한 리사이즈 루프 대응 1차(`h-dvh` + `min-h-0`) 실험 후 롤백
  - [x] 모바일 회귀 대응: 레이아웃 실험 롤백 + 로컬 업로드 `blob URL` 경량화
  - [x] 모바일 리사이즈 정책 2차: width-fit 우선 + 높이 상한 제거
  - [x] 리사이즈 기준 분리 3차: 상위 래퍼 측정 + 동일값 상태 업데이트 방지
  - [x] 배경 적용 원자 커밋 1차: 성공 시점 일괄 반영/실패 시 상태 유지
  - [x] 전역 최대폭 1440px + 초과 화면 중앙 정렬 적용
  - [x] 전역 최대폭 1440px 정책 해제 + body 회색 배경 제거
  - [x] 전역 컨테이너 최대폭 1440 재적용(`PageContainer max-w-[1440px]`) + 홈 히어로 `max-w-2xl` 해제 (#128)
  - [x] 페이지 컨테이너 레이아웃 공통화 1차 (`PageContainer` 도입)
  - [x] 공유 섹션 주요 버튼 높이 통일 (`h-11`)
  - [x] 공유 섹션 다운로드 UX 단순화 (`다운로드 클릭형 포맷 드롭다운` + `다운로드/클립보드` 한 줄 배치)
  - [x] 데스크탑 에디터 스타일 리프레시 1차 (`md` 전용 shell/rail/panel/canvas 시각 톤 개선, 모바일 제외)
  - [x] 데스크탑 에디터 스타일 정렬 2차 (non-border 기준 복귀 + 좌측 레일 제거 + 우측 단일 패널 통합)
  - [x] 데스크탑 에디터 스타일 정렬 3차 (캔버스 추가 배경 제거 + 텍스트/도형 버튼 외곽 섹션 제거)
  - [x] 데스크탑 에디터 스타일 정렬 4차 (우측 상단 도구 상태 라벨 제거)
  - [x] 데스크탑 에디터 스타일 정렬 5차 (캔버스 배경 제거 유지 + 우측 편집 패널 배경 복구)
  - [x] 모바일 에디터 디자인 정렬 1차 (툴/히스토리/패널 톤을 데스크탑과 동일 패턴으로 통합)
  - [x] 에디터 이미지 업로드를 캔버스 빈 상태 드롭존으로 이관 + `이미지` 탭 제거
  - [x] 모바일 에디터 패널을 하단 고정 시트에서 인플로우 스크롤 레이아웃으로 복귀
  - [x] 에디터 캔버스 외곽선(border) 제거
  - [x] 다크모드 에디터 배경 토큰 통일(`--editor-canvas-bg` = `--app-surface`)
  - [x] 홈/에디터/밈플릿 목록 루트 배경 토큰 통일(`bg-app-surface`)
  - [x] 전역 프리미티브 스타일 통일 1차(`button/input/textarea/card/dropdown/dialog/sheet`)
  - [x] `/templates` 라이트/다크 카드 hover-only 처리(기본 배경 투명 + hover 시 카드 외곽선 제거, 이미지 주변 배경 유지 제거)
  - [x] `/templates` 상단 정보 블록 제거(타이틀/부제/새로 만들기 버튼)
  - [x] `/templates` 로딩 스켈레톤 톤 정렬(배경/보더 강도 완화 + 단순 pulse surface)
  - [x] 메인 헤더 배경/보더 제거(페이지 배경과 일체형 상단 바)
  - [x] 에디터 Studio Split 1차(데스크탑 3분할 + 모바일 Bottom Sheet 40/80 + 패널 스크롤 정리)
  - [x] 모바일 헤더 햄버거 위치/정렬 보정 + 사이드패널 카드형 UI 개선
  - [x] 색상 토큰 공통화 및 라이트/다크 모드 기반 테마 시스템 도입 (`#92`)
  - [x] `index.css` semantic token(light/dark) 정의 및 전역 적용
  - [x] `App.tsx` Ant Design 토큰을 semantic token으로 연동
  - [x] 다크모드 버튼 밝기 톤다운 1차 (`colorPrimary` 하향 + Button shadow 제거 + 주요 버튼 그림자 정리)
  - [x] 에디터 배경 계층 분리 1차 (`app-surface` 바닥 + `app-surface-elevated` 패널/캔버스 프레임)
  - [x] 다크 에디터 컨트롤 가시성 보강 1차 (툴바/히스토리/레이어 아이콘 버튼 대비 상향)
  - [x] 템플릿 목록/상세 다크 가시성 보강 1차 (`Text secondary` 제거 + 보조 텍스트 대비 상향)
  - [x] 리믹스 진입 에디터 다크 가시성 보강 2차 (패널/캔버스 토큰 분리 + 레이어 아이콘 버튼 크기/보더 강화)
  - [x] 다크모드 전역 색상 규칙 정합화 1차 (`#fff` 제거 + `bg-white` 계열 치환 + 빈상태 가이드 스타일 통일)
  - [x] `EditorGuideCard` 공통 컴포넌트화 (도구선택/업로드/개체없음 가이드 렌더 통일)
  - [x] 공통 레이아웃/헤더/카드 색상 유틸 치환(`slate/blue` 직접 의존 제거)
  - [x] 에디터/캔버스 하드코딩 색상(HEX) 토큰화
  - [x] 라이트/다크 수동 검증 + 스크린샷 비교
  - [x] Tailwind + shadcn/ui 전환 1차 (인프라 도입 + 공통 레이아웃/핵심 페이지 치환)
  - [x] Ant Design 완전 제거 2차 (`Templates`, `TemplateShareDetail`, `ImageShareDetail`, `MyTemplates`, `MemeEditor`, `MemePropertyPanel`, `MemeCanvas`, `useMemeEditor`)
  - [x] 웹 타입체크 경로 보정 + TS 오류 정리 (`build: tsc -b`, `typecheck` 스크립트 추가, `preserveSymlinks` 제거, 캔버스/업로드/nullable 타입 오류 수정)
  - [ ] 전역 스타일 시스템 재정비 (#96)
  - [x] `theme.ts` Ant 잔존 토큰 제거(`AntThemeToken`, `ANT_TOKENS`, `getAntThemeTokens`)
  - [x] `tailwind.config.js` preflight 비활성화 제거
  - [x] `index.css` shadcn base 정합화(`@layer base`, `color-scheme`, radius 토큰)
  - [x] 레이아웃/에디터의 `style={{ var(--...) }}` 인라인 스타일 제거 및 semantic 클래스 치환
  - [x] `ui/alert.tsx`의 `dark:` variant 제거
  - [x] 핵심 동선(`MainHeader`, `HomePage`, `LoginPage`, `MemeEditor`, `MemePropertyPanel`, `MemeCanvas`, `MemeColorPicker`, `EditorGuideCard`, `TemplatesPage`, `ThumbnailCard`, `TemplateThumbnailCard`) `slate/blue` 직접 클래스 제거
  - [x] 상세/마이 페이지(`TemplateShareDetailPage`, `ImageShareDetailPage`, `MyTemplatesPage`, `MyPage`, `MySectionLayout`) `slate/blue` 직접 클래스 semantic alias 2차 치환
  - [x] 마이 섹션 UI/UX 일원화 1차(#121): `MySectionLayout` 컨테이너/모바일 탭 정렬, `MyPage`/`MyTemplatesPage` 상태뷰·액션·삭제확인 플로우 공통화, 썸네일 카드 패딩 8-grid 정렬, 내 밈플릿 목록 카드 UI를 `/templates`와 동일 구조로 정렬 + 관리 액션 상세보기/소유자 노출 제한
  - [x] 내 밈플릿 관리 동선 액션 단순화(#124): 템플릿 상세 owner 관리 영역의 `링크 복사` 제거(편집/삭제/공개전환 유지)
  - [x] 밈플릿-리믹스 관리 규칙 강화(#126): 리믹스 존재 시 템플릿 `비공개 전환/삭제` 차단(`409`), 리믹스 상세 owner 메타(제목/설명) 수정 기능 추가, 밈플릿 상세 리믹스 섹션 카드 배경 제거, 리믹스 상세 데스크톱 레이아웃을 `좌측 상세정보/관리 + 우측 이미지`로 정렬, 리믹스 목록 썸네일 스타일을 `/templates` 목록 규격(hover/폭/메타)으로 통일
  - [x] 썸네일 하단 텍스트 여백 정렬(#132): `ThumbnailCard`/`TemplateCardSkeletonGrid`에 썸네일 래퍼 `px-4` + 본문 `px-4 pt-3 pb-4`를 공통 적용해 밈플릿/리믹스 카드의 썸네일-텍스트 좌우 기준선/간격 일관화
  - [x] 리믹스 상세 owner 관리 모달 전환(#134): `내 리믹스 관리`를 `수정` 버튼+`Dialog` 패턴으로 전환하고 제목/설명 편집/저장을 모달에서 수행
  - [x] 리믹스 수정 모달 저장 중 닫힘 방지(#135): `Dialog onOpenChange`를 저장 상태 가드로 전환해 저장 중 오버레이/ESC/X 닫힘 차단
  - [x] 리믹스 상세 owner 액션 단순화/권한 플래시 방지(#137): `내 리믹스 관리` 섹션 제거 후 `수정` 버튼만 노출, owner 가드에 `authInitialized` 포함
  - [x] 템플릿 상세 owner 액션 단순화/권한 플래시 방지(#138): `내 템플릿 관리` 카드/제목 제거, owner 액션만 노출하고 owner 가드에 `authInitialized` 포함
  - [x] 템플릿 메타 저장 오검출 수정(2026-02-22): `UpdateTemplateSchema`의 `visibility` 기본값 주입 제거로 제목/설명 PATCH가 비공개 전환으로 오인되는 문제 차단
  - [x] 템플릿 관리 모달 메타 편집 보강(2026-02-22): owner 모달에 제목/설명 입력/저장 액션 추가, 공개/삭제 제약은 모달 내부에서만 제어
  - [x] 템플릿 상세 owner 버튼 지연 개선(2026-02-22): 상세 API 응답에 `isOwner`를 포함하고 UI에서 `isOwnerByDetail || isOwnerByAuth` 판별로 `수정` 버튼 노출 지연 완화 + 세션 복구 시 owner UI 고정 차단 방지
  - [x] 내 밈플릿 헤더 단순화(2026-02-22): `내 밈플릿 관리` 타이틀을 `내 밈플릿`으로 정리하고 헤더 설명/`새 밈플릿 만들기` CTA 제거
  - [x] 밈플릿 목록 정렬/기간 필터 추가(#142): `/templates` 우측 상단에 `Sort by(최신/좋아요/조회수)` + 기간(`24시간/7일/30일/1년/전체`) 셀렉트를 추가하고 `GET /templates/public`에 `sortBy/period` 쿼리를 연동
  - [x] 밈플릿 목록 정렬 UI 텍스트 버튼형 정리(2026-02-22): `최신순/인기순/조회순` 독립 버튼으로 구성(텍스트만 노출), 스타일을 밈플릿 상세 리믹스 정렬 토글(`bg-muted + h-8 pill`)과 동일화
  - [x] 밈플릿 목록/상세 정렬 라벨 최종 통일(2026-02-22): 목록과 상세 리믹스 정렬을 모두 `최신/좋아요/조회` 3옵션으로 통일하고 상세 정렬 로직에 `views` 분기 추가
  - [x] 밈플릿 목록 정렬 라벨 텍스트 제거(2026-02-22): 목록 우측 상단의 `정렬` 문구 제거(버튼 그룹만 노출)
  - [x] 내 밈플릿 정렬/기간 컨트롤 추가(2026-02-22): `/my/templates`에 `최신/좋아요/조회` 토글 + 기간 셀렉트 추가, API 변경 없이 클라이언트 정렬/기간 필터 적용
  - [x] 정렬 기능 보완(2026-02-22): 템플릿 공개 목록 정렬 쿼리의 `any` 타입 제거 및 밈플릿 상세 정렬 버튼 `aria-pressed` 적용
  - [x] 상세 패널 높이 정렬 고정(2026-02-22): 밈플릿/리믹스 상세 2열 그리드에 `lg:items-start` 적용, 리믹스 좌측 패널 `lg:self-start` 적용
  - [x] 밈플릿 상세 좋아요 버튼 추가(2026-02-22): 좌측 액션 영역에 `따봉 + 카운트` 버튼을 배치하고 `수정` 버튼의 왼쪽에 정렬
  - [x] 밈플릿 상세 좋아요 기능 연동(2026-02-23): `POST /templates/s/:shareSlug/like` 추가, 상세 버튼 클릭 시 카운트 즉시 반영, RPC 미존재/스키마 캐시 지연 시 저장소 fallback으로 500 회피
  - [x] 리믹스 상세 좋아요 기능 연동(2026-02-23): `POST /images/s/:shareSlug/like` 추가, 상세 버튼 클릭 시 카운트 즉시 반영, RPC 미존재/스키마 캐시 지연 시 저장소 fallback 적용
  - [x] API 경로 용어 일원화 1차(2026-02-23): `/api/v1/memeplates/*`, `/api/v1/remixes/*` 경로를 추가하고 웹 호출을 신규 경로로 전환(기존 `/templates/*`, `/images/*` 호환 유지)
  - [x] API 경로 용어 일원화 2차(2026-02-23): `/api/v1/templates/*`, `/api/v1/images/*` 구경로 제거, `/api/v1/memeplates/*`, `/api/v1/remixes/*`만 유지
  - [x] 프론트 페이지 경로 일원화 3차(2026-02-23): 라우트/내비게이션을 `/memeplates`, `/memeplates/s/:shareSlug`, `/remixes/s/:shareSlug`, `/my/memeplates`로 단일화하고 구경로(`/templates`, `/images`, `/my/templates`) 제거
  - [x] 조회수/좋아요 actor 중복 방지 1차(#147, 2026-02-23): actor HMAC 키 기반으로 `view 24시간 dedupe`, `like 토글(좋아요/취소)` 적용 + 상세 `likedByMe` 응답 추가 + SQL(`metric_actor_states`, dedupe/toggle RPC) 및 `TRUST_PROXY`/`METRIC_ACTOR_HASH_SECRET` 환경 변수 추가
  - [x] 상세 좋아요 중복 클릭 레이스 차단(2026-02-23): 밈플릿/리믹스 상세 좋아요 요청에 `useRef` 즉시락을 추가해 재렌더 전 더블클릭 중복 호출 방지
  - [x] 상세 좋아요 stale 응답 차단(2026-02-23): `AbortController` + 요청 시퀀스(ref) 가드로 상세 라우트 전환 후 지연 응답이 다른 slug 상태를 덮어쓰지 않도록 보강
  - [x] 홈 V1 레이아웃 개편(#149, 2026-02-23): 히어로/퀵액션/추천 밈플릿/사용법 3단계/최근 리믹스 섹션으로 초기 오픈형 홈을 구성하고 `memeplates/remixes public` API를 재사용해 데이터 섹션 연결 + 데스크톱/모바일 스크린샷 검증
  - [x] 홈 V1 후속 정리(#150, 2026-02-23): 사용법 3단계 섹션 제거, 추천 밈플릿 바로 아래 최근 리믹스 배치 유지, 밈플릿 상세 좌측 sticky 제거로 스크롤 체감 이상 개선 + 스크린샷 검증
  - [x] 전역 Footer 추가(2026-02-24): `MainFooter` 컴포넌트를 신설하고 홈/목록/상세/마이 섹션 하단에 공통 배치(에디터 제외) + 스크린샷 검증
  - [x] Footer 법적 링크 전용화(2026-02-24): 푸터 링크를 `Privacy/About/Terms + ©`로 단순화하고 `/privacy`, `/about`, `/terms` 페이지/라우트 추가
  - [x] Privacy 본문 톤/구조 정리(2026-02-24): `Memeplate / Remix`, `쿠키 사용 안내` 단락으로 정리하고 리믹스 존재 시 비공개/삭제 제한 문구 및 실제 쿠키 사용(`mp_access`, `mp_refresh`, `mp_oauth_state`, `mp_oauth_next`) 안내 반영
  - [x] About 본문 톤 보강(2026-02-24): 빠른 제작/공유 + 공개/비공개 + 친구 공유/커뮤니티 공유 흐름을 명시한 소개 문구로 교체
  - [x] Terms 본문 v1 작성(2026-02-24): 약관 핵심 조항을 섹션형으로 정리하고 OAuth 제공자 문구를 범용화
  - [x] Terms 주체 표현 교정(2026-02-24): `회사`를 `운영자`로 통일
  - [x] 리믹스 댓글 기능 1차(#152, 2026-02-24): `GET/POST /api/v1/remixes/s/:shareSlug/comments` 추가, `ImageShareDetailPage` 댓글 목록/등록 UI 연결, 비로그인 등록 시 로그인(next) 리다이렉트 처리, SQL(`2026-02-24_remix_comments_schema.sql`) 추가 및 데스크톱/모바일 스크린샷 검증
  - [x] 리믹스 댓글 2단 고정 스레드 확장(#153, 2026-02-24): `replyToCommentId` 기반 답글 생성 규칙(`rootCommentId`, `replyToCommentId`) 추가, 조회 응답에 `replyToAuthorDisplayName` 포함, 댓글/대댓글 `답글` UI 및 `OO님에게 답글` 상태 표시 적용, 관련 SQL/인덱스 보강 및 스크린샷 검증
  - [x] 리믹스 답글 인라인 입력 UX 반영(2026-02-24): `답글` 클릭 시 상단 공용 입력창 대신 해당 댓글 위치에 인라인 입력창/취소/등록 액션이 노출되도록 수정
  - [x] 리믹스 목록 댓글 수 노출(2026-02-24): `GET /api/v1/remixes/public` 응답에 `commentCount` 집계를 포함하고 홈/밈플릿 상세 리믹스 카드 메타에 댓글 아이콘+카운트 표시를 추가
  - [x] 리믹스 상세 액션 UI 보강(2026-02-24): 좋아요 아이콘을 하트로 통일하고 댓글 수 버튼을 액션 행에 추가, 클릭 시 댓글 섹션으로 스크롤 이동
  - [x] 리믹스 상세 응답에 댓글 동봉(2026-02-24): 상세 API 응답에 `comments/commentsTotalCount`를 포함하고 상세 페이지의 별도 댓글 조회 호출을 제거
  - [x] 리믹스 상세 레이아웃 2차 개편(2026-02-25): 메인 섹션을 `이미지(좌)+메타(우)`로 통합하고, 좌측 영역을 `원본 밈플릿 카드 + 다른 리믹스` 목록으로 전환
  - [x] 리믹스 상세 `다른 리믹스` 카드 정리(2026-02-25): 헤더 개수 텍스트 제거, 썸네일을 고정 높이 + `object-cover` 카드로 통일
  - [x] 리믹스 상세 `다른 리믹스` 썸네일 공통 컴포넌트 정렬(2026-02-25): `ThumbnailCard` 패턴으로 복귀해 밈플릿 목록/상세 카드와 메타 구조를 통일
  - [x] 리믹스 상세 `원본 밈플릿` CTA 단순화(2026-02-25): `원본 보기` 버튼을 제거하고 원본 영역을 `ThumbnailCard` 클릭 진입 패턴으로 통일(`리믹스` 버튼만 유지)
  - [x] 썸네일/프리뷰 이미지 CORS 로드 보정(2026-02-25): `ThumbnailCard`/`PreviewFrame`의 `crossOrigin="anonymous"` 제거로 일부 CDN 객체 `net::ERR_FAILED`로 인한 이미지 미노출 해소
  - [x] 리믹스 상세 `원본 밈플릿` 메타 확장(2026-02-25): `sourceTemplate`에 `viewCount/likeCount`를 포함하고 원본 카드에 `작성자 + 조회/좋아요` 행을 추가
  - [x] 리믹스 상세 사이드 스켈레톤 통일(2026-02-25): 원본/다른 리믹스 로딩 UI를 목록 카드 스켈레톤 패턴(`thumb-card-surface` + 본문 2줄)으로 정렬
  - [x] 리믹스 상세 로드 race/실패 고착 보정(2026-02-25): 상세 fetch에 `AbortController + requestSeq`를 적용하고 로드 시작 시 `isLoading/error/image`를 초기화해 stale/error 고착 상태를 방지
  - [x] 리믹스 상세 제목/작성자 위치 조정(2026-02-25): 제목을 이미지 상단으로 이동하고 제목 하단에 작성자명을 배치, 우측 상세정보 목록의 `만든 사람` 항목 제거
  - [x] 리믹스 상세 메인 이미지 여백 정렬(2026-02-25): `PreviewFrame` 내부 패딩을 `p-0`으로 맞춰 제목/댓글 섹션과 좌우 기준선을 통일
  - [x] 리믹스 상세 설명 위치 조정(2026-02-25): 설명을 상단 헤더에서 제거하고 우측 `리믹스 정보` 블록 위로 이동
  - [x] 리믹스 댓글 빈 상태 UI 플랫화(2026-02-24): `Alert` 카드 대신 아이콘+설명 텍스트 인라인 구성으로 전환
  - [x] 리믹스 댓글 빈 상태 아이콘 확대(2026-02-24): `mdiCommentOutline` 크기를 `0.9`에서 `1.2`로 조정
  - [x] `apps/web/src`(단, `index.css` 변수명 제외) 클래스 스캔 기준 `slate/blue/on-accent` 직접 클래스 0건 확인
  - [ ] shadcn primitive variant 규칙 재점검(`button/input/card/dropdown/sheet`)
  - [ ] 웹 워커(Web Worker) 기반 내보내기 처리
  - [ ] Undo/Redo 로직 정밀화

## 백엔드 도입 (Fastify) [In Progress]
- [x] **1차 스캐폴딩**
  - [x] `server/` 패키지 초기화 (`Fastify + TS + Zod`)
  - [x] API 진입점 및 라우트 모듈 생성 (`health`, `auth`, `templates`)
  - [x] 환경변수 스키마 및 `.env.example` 추가
  - [x] 루트 스크립트 연결 (`npm run dev:api`, `npm run build:api`)
- [x] **1.1 환경설정/헬스체크 정리**
  - [x] `.env.development` / `.env.production` 분리 로딩 구현
  - [x] `apps/api/.env.development.example`, `apps/api/.env.production.example` 추가
  - [x] `GET /healthz` 엔드포인트 추가
  - [x] 헬스체크 URL 수동 검증 (`/healthz`, `/api/v1/health`)
- [x] **1.2 pnpm 모노레포 전환**
  - [x] 워크스페이스 경로를 `apps/web`, `apps/api`로 재구성
  - [x] 루트 `package.json`을 workspace 오케스트레이터로 전환
  - [x] `pnpm-workspace.yaml` 및 `pnpm-lock.yaml` 추가
  - [x] `package-lock.json` 계열 제거
  - [x] `apps/api/README.md` 경로/실행 명령 갱신
- [x] **1.3 프로덕션 배포 경로 통합**
  - [x] API 서버에서 SPA 정적 서빙(`@fastify/static`) 구현
  - [x] `WEB_DIST_DIR` 환경변수 추가 및 example 반영
  - [x] SPA fallback 라우트(`/* -> index.html`, `/api*` 제외) 구현
  - [x] 프로덕션 모드 수동 검증 (`/`, `/create`, `/api/v1/health`)
- [ ] **2차 인증 구현**
  - [x] Supabase 인증 스키마(SQL) 초안 작성 (`docs/ai-context/sql/2026-02-14_supabase_auth_schema.sql`)
  - [x] Google OAuth start/callback 라우트 구현
  - [x] JWT(access/refresh) 쿠키 발급/검증/회전 구현
  - [x] `POST /api/v1/auth/refresh` API 구현
  - [x] 공통 인증 미들웨어(`requireAuth`) 구현 및 밈플릿 라우트 적용
  - [x] `MainHeader` 로그인/로그아웃 UI 및 세션 상태 표시 연동
  - [x] 우측 상단 사용자 이름 메뉴(마이페이지/내 밈플릿/로그아웃) 연결
  - [x] `마이페이지(/my)` 화면 추가
  - [x] `/my`, `/my/templates` 공통 좌측 사이드 메뉴 레이아웃 적용
  - [x] `/login` 페이지 추가 (Memeplate 로고 + 하단 구글 로그인 버튼)
  - [x] 인증 리다이렉트 `next` 플로우 1차 (#109~#115)
  - [x] 템플릿 상세 `리믹스` 클릭 시 비로그인 로그인 유도 (`/login?next=/create?shareSlug=...`)
  - [x] `/create?shareSlug|templateId` 직접 진입 비로그인 가드
  - [x] 로그인 페이지 -> OAuth start `next` 전달
  - [x] OAuth callback `next` 복귀 + 상대경로 검증(오픈 리다이렉트 방지)
  - [x] 공통 API 401 리다이렉트 정책 `/login?next=` 통일
  - [x] 헤더 로그인 진입 시 현재 경로 `next` 보존
  - [x] 에디터 게시/저장 액션 실행 전 세션 확인 + 비로그인 로그인 유도
  - [ ] Supabase SQL 실행 및 초기 데이터 검증
- [ ] **3차 밈플릿 도메인 구현**
  - [x] `TemplateRepository` Supabase 구현체 추가
  - [x] 내 밈플릿 조회/등록/수정/삭제 API 구현
  - [x] 공개 밈플릿 목록 API 구현 (`GET /templates/public`)
  - [x] 공개 목록 지표 필드 응답 추가 (`viewCount`, `likeCount`)
  - [x] 공유 slug 상세 조회 API 구현 (`GET /templates/s/:shareSlug`)
  - [x] 에디터 공유 탭 API 연동(저장/업데이트/공유링크복사)
  - [x] 공개 밈플릿 시작 경로(`shareSlug`)에서 배경 미복원 케이스 fallback 처리(썸네일 기반 background 객체 주입)
  - [x] 공개 밈플릿 시작 시 기본 활성 도구를 `편집`으로 설정
  - [x] 썸네일 payload 최적화(긴 변 `1280px` 리사이즈 + `webp` 품질 압축)
  - [x] 템플릿 목록/관리 전용 화면 구현 (`/templates`, `/my/templates`)
  - [x] `meme_images` 도메인 API 구현 (`/images`, `/images/s/:shareSlug`, `/images/me`, CRUD)
  - [x] `meme_images` 프론트 화면 구현 (`/images`, `/images/s/:shareSlug`, `/my/images`)
  - [x] 밈플릿 상세에서 원본/연관 이미지 2열 레이아웃 적용
  - [x] 연관 이미지 조회용 `templateId` 필터 API 적용
  - [x] 템플릿/리믹스 `description` 입력/조회 지원 및 공유 탭 입력 UI 추가
  - [x] 템플릿/리믹스 `title` 단일라인 검증(줄바꿈 금지) 적용
  - [x] 리믹스 게시 시 `templateId` 필수화 및 미연결 상태 UI 차단
  - [x] 공개 템플릿 시작 경로(`shareSlug`)의 `thumbnailUrl` 기반 배경 fallback 제거 (R2 URL 저장 정책 고정)
  - [x] 템플릿 R2 경로/저장정책 단순화 (`templates` 단일 + 썸네일 별도 업로드 제거)
  - [x] `templates.thumbnail_url` 컬럼 드롭 마이그레이션 추가 + API thumbnail 계산 로직 전환
  - [x] 밈플릿 상세 진입 직후 썸네일 미표시 레이스 보정 (`img.complete` 동기화 + `onError` fallback + URL key 재평가)
  - [x] 밈플릿 상세 뷰 스타일 정리 2차 (썸네일/정렬 토글 외곽선 제거 + 리믹스 빈상태 아이콘화)
  - [x] 밈플릿 상세 로딩 스켈레톤 톤 통일 (목록 스켈레톤과 동일 톤/카드 구조 적용)
  - [x] 밈플릿 목록/상세 카드 스켈레톤 공통 컴포넌트화 (`TemplateCardSkeletonGrid`)
  - [x] 밈플릿 상세 로딩 높이 안정화 (리믹스 skeleton 2개 + 로딩/빈상태 min-height 정렬)
  - [x] 밈플릿 상세 좌/우 패널 외곽선 제거(초기 로딩 패널 포함)
  - [x] 리믹스/밈플릿 상세 초기 이미지 스켈레톤을 `PreviewFrame` 공통 마크업으로 통일(`loadingPlaceholder`)
  - [x] 목록 스켈레톤 썸네일(`TemplateCardSkeletonGrid`)을 실카드(`ThumbnailCard`) 로딩 구조와 동일화
  - [x] 썸네일 카드/스켈레톤 썸 표면 배경 제거(`bg-card`, `bg-muted`, `bg-muted/80`)
  - [x] 리믹스 목록 썸네일 고착 대응: `ThumbnailCard` `img.complete + naturalWidth` 선확인 및 `key={imageUrl}` 동기화
  - [x] 리믹스 상세 메인 이미지 고착 대응: `ImageShareDetailPage` 로드/에러 상태 분리 및 `onError` 연동
  - [x] 밈플릿 상세/리믹스 상세의 `밈플릿 목록으로` 버튼 제거
  - [x] 웹 UI 스타일 일원화 1차 (#108)
  - [x] `Skeleton` primitive 공통 적용(목록/상세/썸네일 로딩 톤 정렬)
  - [x] 썸네일 스켈레톤 썸 영역 외곽선 제거(배경 유지)
  - [x] 밈플릿 상세 좌측 원본 썸네일 스켈레톤을 리믹스 카드와 동일 규칙으로 정렬
  - [x] 밈플릿 상세 좌측 원본 썸네일 스켈레톤 래퍼 라운드(`overflow-hidden rounded-xl`) 정렬
  - [x] `ImageShareDetailPage` 상세 레이아웃 톤 정렬(무보더 카드 + 공통 스켈레톤)
  - [x] destructive red 하드코딩 제거(`MyTemplatesPage`, `MemePropertyPanel`)
  - [x] 루트 배경 규칙 정렬(`LoginPage`, `MySectionLayout`)
  - [x] `popover`/`tooltip` radius 정렬(`rounded-xl`)
  - [x] 상세 프리뷰/썸네일 역할 분리: `PreviewFrame` 공통 컴포넌트 도입 및 상세/시트 프리뷰 영역 적용
