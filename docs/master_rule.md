# AI 코딩 및 작업 관리 규정 (Strict Protocol)

당신은 이 프로젝트의 코드를 수정하거나 제안하기 전, 반드시 아래의 관리 체계를 준수해야 합니다. 이 규칙은 모델 간(Claude, Gemini 등)의 맥락 공유와 작업 효율성을 최적화하기 위해 설계되었습니다.

---

## 1. 필수 컨텍스트 파일 (Source of Truth)
모든 작업은 아래 파일들을 참조하고 업데이트해야 합니다.
- **`docs/ai-context/status.md`**: 현재 진행 중인 태스크와 전체적인 진행률.
- **`docs/ai-context/decision_log.md`**: 아키텍처 선택, 라이브러리 도입 이유 등 주요 결정 사항.
- **`docs/ai-context/todo.md`**: 구체적인 하위 작업 목록 및 완료 여부.

## 2. 작업 프로세스 (Step-by-Step)

### [단계 1: 작업 시작 전]
1. `status.md`와 `todo.md`를 읽어 현재 위치를 파악한다.
2. **Serena MCP를 필수로 사용**하여 관련된 코드의 심볼과 구조를 확인한다.
3. 작업할 내용이 기존 결정 사항(`decision_log.md`)과 충돌하는지 확인한다.

### [단계 2: 작업 중]
1. 코드를 수정할 때는 한 번에 하나의 원자적(Atomic) 기능만 수정한다.
2. 아래 **4. Serena MCP 사용 상세 규칙**을 준수하여 수정한다.
3. 수정 완료 후 반드시 테스트(Go test 또는 Vitest 등)를 실행하여 무결성을 증명한다.

### [단계 3: 작업 종료 후 - 필수!]
다음 모델이 작업을 이어받을 수 있도록 아래 내용을 **업데이트**한다.
- **`status.md`**: "어디까지 수정했는지", "다음 모델이 이어서 해야 할 작업은 무엇인지" 요약.
- **`todo.md`**: 완료된 항목 체크 (`[x]`).
- **`decision_log.md`**: 새로운 라이브러리 추가나 로직 변경 시 이유 기록.

## 3. 기록 가이드라인 (Format)
- 모든 기록은 **한글**로 작성한다.
- 코드 조각을 포함할 때는 반드시 파일 경로를 명시한다.
- 리밋(Quota) 상황을 고려하여 최대한 핵심 위주로 간결하게 작성한다.

## 4. 디자인 규칙
1. 8px 그리드
2. 일관된 radius
3. 그림자 단계 통일
4. 컬러 5개 이하
5. 타이포 스타일
6. 여백 크게 쓰기
7. 애니메이션 200~300ms
8. 보라색 네온 그라데이션 쓰지말기

## 5. E2E 테스트 규칙
1. playwright로 직접 브라우징한다.
2. 스크린샷을 이용하여 ui를 직접 보고 디자인을 판단해라.

## 6. 커밋 메시지 규칙
1. 한글로 작성
2. 문체는 추가하였습니다 -> 추가
3. 최대한 심플한 내용 유지
4. 작업내역외의 내용 포함 금지(작성자, 출처 등)

## etc. Serena MCP 사용 상세 규칙 (코드 탐색 및 수정)

이 프로젝트에서는 코드 분석 및 수정 시 **Serena MCP 사용이 강제**됩니다.

### [금지 사항]
- `Read` 툴로 파일 전체 읽기 (코드 파일의 경우)
- `Edit` 툴로 코드 수정하기
- `Write` 툴로 새 코드 파일 생성하기
- `Grep` 툴로 코드 검색하기

### [권장 사용 패턴]

#### 1. 코드 탐색
- `get_symbols_overview(path, depth=1)`: 파일의 전체적인 구조 파악.
- `find_symbol(name, include_body=true)`: 특정 심볼(함수, 클래스 등)의 내용 확인.
- `search_for_pattern(pattern)`: 특정 패턴 검색.

#### 2. 코드 수정 및 분석
- `replace_symbol_body(name, body)`: 심볼 단위로 코드 수정.
- `insert_after_symbol(name, body)`: 특정 심볼 뒤에 코드 삽입.
- `find_referencing_symbols(name, path)`: 의존성 및 참조 확인.

### 핵심 원칙
1. **절대 파일 전체를 읽지 않는다**: 필요한 심볼만 골라 읽어 토큰을 절약한다.
2. **문자열 기반 편집 지양**: 심볼 단위 수정을 통해 문법 오류를 방지한다.
3. **탐색 우선**: overview → symbol → edit 순서의 워크플로우를 준수한다.

### 예외 사항
- 설정 파일(JSON, YAML, MD 등) 및 매우 짧은 파일(< 50줄): 일반 Read/Edit 허용.
- 비코드 파일: 일반 툴 사용 가능.

---
**주의:** 이 규칙을 무시하고 코드를 수정할 경우, 해당 작업은 무효로 간주됩니다. 항상 기록을 먼저 확인하고 마지막에 업데이트하세요.